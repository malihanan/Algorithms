import random
import math

count = 0

def randomizedQuickSort(arr, p, r):
	if p < r:
		q = partition(arr, p, r)
		randomizedQuickSort(arr, p, q-1)
		randomizedQuickSort(arr, q+1, r)
	return count
	
def partition(arr, p, r):
	global count
	index = random.randrange(p, r+1, 1)
	arr[r], arr[index] = arr[index], arr[r]
	pivot = arr[r]
	i=p-1
	for j in range(p, r):
		if arr[j] <= pivot:
			count += 1
			i+=1
			arr[j], arr[i] = arr[i], arr[j]
	i+=1
	arr[i], arr[r] = arr[r], arr[i]
	return i
	
def findComparisons(arr):
	global count
	comp = 0
	for i in range(len(arr)):
		comp += randomizedQuickSort(arr, 0, len(arr)-1)
		count = 0
	return (float(comp)) / len(arr)
	
if __name__ == '__main__':
	arr = [193, 360, 657, 976, 784, 56, 977, 213, 608, 432, 304, 70, 382, 906, 64, 508, 167, 524, 241, 940, 181, 936, 631, 415, 707, 846, 6, 946, 726, 385, 637, 665, 124, 9, 849, 857, 91, 317, 312, 109, 374, 514, 200, 984, 866, 901, 415, 294, 621, 483, 28, 497, 430, 282, 497, 508, 906, 845, 600, 304, 963, 796, 87, 127, 733, 456, 389, 188, 412, 405, 426, 77, 437, 356, 69, 850, 263, 941, 419, 432, 935, 945, 60, 150, 28, 737, 243, 394, 249, 214, 498, 16, 247, 162, 544, 60, 778, 20, 783, 269, 112, 250, 962, 235, 876, 960, 148, 706, 136, 934, 193, 167, 11, 244, 874, 647, 386, 403, 137, 576, 960, 787, 12, 488, 562, 350, 819, 70, 66, 377, 389, 343, 347, 9, 266, 348, 542, 878, 379, 898, 156, 968, 244, 198, 143, 955, 559, 720, 823, 101, 663, 930, 337, 644, 119, 332, 62, 974, 540, 711, 379, 569, 126, 694, 883, 668, 16, 673, 405, 792, 3, 148, 281, 292, 411, 33, 956, 523, 686, 553, 943, 550, 883, 682, 904, 108, 682, 39, 712, 875, 641, 261, 243, 930, 958, 314, 571, 592, 744, 81, 814, 924, 154, 83, 86, 838, 390, 420, 869, 402, 495, 231, 92, 929, 81, 951, 525, 469, 528, 905, 806, 399, 346, 805, 684, 656, 56, 155, 249, 809, 854, 241, 204, 643, 904, 22, 689, 537, 965, 499, 833, 883, 125, 816, 198, 166, 656, 975, 346, 449, 295, 293, 652, 911, 889, 266, 978, 767, 320, 882, 231, 806, 332, 655, 262, 347, 129, 761, 124, 686, 436, 143, 652, 880, 847, 234, 803, 633, 382, 495, 60, 415, 403, 973, 117, 965, 445, 397, 597, 878, 283, 63, 584, 771, 480, 361, 472, 592, 225, 328, 836, 328, 898, 200, 659, 773, 88, 76, 768, 98, 210, 235, 913, 62, 107, 276, 23, 726, 192, 875, 400, 451, 194, 915, 248, 709, 558, 711, 299, 185, 892, 643, 559, 491, 414, 199, 67, 983, 108, 642, 387, 203, 509, 654, 731, 25, 263, 630, 98, 116, 84, 743, 371, 960, 645, 669, 82, 975, 850, 298, 543, 887, 604, 586, 36, 546, 185, 95, 344, 532, 302, 547, 53, 690, 143, 552, 427, 301, 875, 784, 718, 874, 786, 621, 322, 893, 944, 220, 627, 294, 96, 710, 913, 362, 498, 378, 926, 827, 22, 612, 929, 830, 557, 85, 938, 280, 178, 992, 692, 858, 87, 434, 496, 933, 5, 805, 311, 561, 473, 796, 653, 831, 258, 268, 454, 480, 823, 670, 688, 341, 564, 733, 794, 778, 595, 252, 105, 205, 741, 399, 890, 147, 433, 197, 729, 662, 969, 936, 760, 346, 556, 267, 76, 998, 609, 476, 597, 468, 645, 981, 996, 351, 212, 385, 29, 158, 975, 610, 91, 965, 483, 114, 85, 375, 678, 405, 549, 336, 594, 485, 714, 34, 454, 309, 389, 368, 647, 384, 945, 77, 798, 797, 499, 629, 48, 496, 276, 368, 879, 283, 764, 332, 176, 802, 566, 406, 473, 306, 98, 552, 318, 470, 996, 910, 305, 775, 829, 263, 432, 125, 202, 507, 21, 363, 301, 5, 326, 914, 596, 809, 267, 884, 818, 276, 674, 960, 311, 238, 753, 949, 457, 676, 138, 235, 752, 208, 323, 342, 611, 30, 748, 984, 72, 907, 436, 338, 408, 408, 429, 91, 563, 571, 455, 494, 2, 588, 743, 81, 510, 774, 344, 473, 359, 138, 503, 76, 778, 174, 897, 201, 674, 306, 807, 623, 919, 362, 208, 642, 849, 737, 719, 292, 743, 850, 508, 405, 994, 841, 202, 683, 408, 899, 684, 487, 493, 961, 154, 445, 79, 321, 603, 202, 701, 567, 155, 561, 323, 509, 642, 522, 367, 356, 409, 579, 835, 774, 879, 370, 864, 192, 22, 74, 403, 796, 776, 885, 238, 798, 780, 521, 212, 366, 969, 767, 674, 115, 260, 193, 132, 794, 765, 48, 397, 87, 459, 116, 464, 926, 694, 664, 565, 710, 661, 262, 977, 970, 270, 463, 495, 460, 158, 714, 637, 787, 616, 483, 996, 91, 677, 995, 923, 672, 424, 684, 648, 46, 582, 565, 212, 883, 751, 629, 517, 469, 133, 195, 310, 378, 194, 695, 559, 685, 774, 793, 739, 265, 791, 173, 613, 556, 882, 341, 948, 823, 485, 29, 43, 113, 839, 745, 653, 207, 73, 945, 985, 890, 807, 308, 764, 399, 543, 164, 51, 623, 466, 17, 936, 629, 167, 567, 625, 864, 611, 785, 348, 772, 262, 4, 467, 880, 623, 896, 342, 577, 877, 50, 7, 236, 590, 599, 749, 486, 238, 215, 854, 710, 222, 988, 246, 296, 263, 660, 636, 922, 674, 464, 718, 166, 501, 784, 507, 431, 484, 462, 478, 519, 649, 862, 503, 172, 632, 528, 531, 881, 508, 893, 280, 258, 26, 164, 157, 576, 384, 160, 954, 411, 715, 21, 768, 37, 177, 410, 211, 990, 710, 968, 63, 442, 177, 666, 860, 73, 272, 345, 265, 607, 492, 213, 891, 791, 696, 118, 66, 146, 859, 68, 903, 318, 512, 409, 762, 152, 83, 703, 812, 940, 755, 868, 281, 842, 144, 79, 500, 149, 336, 649, 586, 421, 86, 671, 911, 1, 304, 617, 641, 264, 769, 622, 327, 551, 843, 427, 272, 455, 871, 124, 634, 438, 499, 841, 519, 932, 492, 554, 513, 479, 868, 605, 212, 787, 83, 460, 977, 880, 267, 680, 995, 774, 67, 181, 918, 996, 282, 51, 389, 370, 93, 932, 50, 957, 983, 55, 52, 650, 555, 499, 210, 74, 625, 752, 777, 984, 543, 584, 276, 154, 45, 1, 262, 398, 184, 350, 727, 776, 471, 852, 269, 423, 164, 999, 639, 100, 293, 383, 131, 381, 768, 363, 534, 111, 252, 344, 915, 824, 357, 607, 993, 787, 681, 957, 198, 451, 847, 596, 457, 378, 801, 7, 718, 130, 622, 270, 868, 354, 372, 431, 583, 371, 645, 938, 164, 143, 826, 348, 173, 875, 452, 842, 121, 172, 292, 966, 435, 386, 812, 477, 788, 289, 566, 473]
	
	print(str(findComparisons(arr)) + " should be O(" + str(len(arr) * math.log(len(arr), 2)) + ")")
